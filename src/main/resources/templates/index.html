<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
   <!--<meta charset="UTF-8">-->
		<!--<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">-->
		<!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <!--<title></title>-->
    <!--<link rel="stylesheet" type="text/css" href="/static/css/layui.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="/static/css/style.css"/>-->
<!--</head>-->
<!--<body id="body">-->

    <!--<header class="header">-->
    	<!--<div class="full-center">-->
        <!--<div id="wrapper" class="login-page">-->
			<!--<div id="login_form" class="form">-->
				<!--<form id="login-form" class="login-form" method="post">-->
					<!--<input name="username" type="text" placeholder="用户名" id="user_name"/>-->
					<!--<input name="password" type="password" placeholder="密码" id="password"/>-->
					<!--<input type="button" id="login" onclick="loginUser()" value="登 录" />-->
					<!--<p class="message">-->
						<!--欢迎登录工作日志系统-->
					<!--</p>-->
				<!--</form>-->
			<!--</div>-->
		<!--</div>-->
		<!--</div>-->
    <!--</header>-->



<!--<script type="text/javascript" src="/static/js/jquery.min.js"></script>-->
<!--<script type="text/javascript" src="/static/js/circleMagic.js"></script>-->
<!--<script type="text/javascript" src="/static/js/layui.js"></script>-->
<!--<script>-->
  <!--$(function(){-->
    <!--$('.header').circleMagic({-->
      <!--radius: 35,-->
      <!--density: .1,-->
      <!--color: 'rgba(255,255,255, 0.4)',-->
      <!--clearOffset: .9-->
    <!--});-->
  <!--}) -->
  <!---->
			<!--layui.use('layer', function() {-->
				<!--//非空验证-->
				<!--$('input[type="button"]').click(function() {-->
					<!--var name = $('input[name="username"]').val();-->
					<!--var pwd = $('input[name="password"]').val();-->
					<!--if(name == '') {-->
						<!--layer.msg("请输入用户名", {-->
							<!--anim:6,-->
							<!--icon: 5,-->
							<!--time:800-->
							<!--});-->
							<!--return;-->
					<!--} else if(pwd == '') {-->
						<!--layer.msg("请输入密码", {-->
							<!--anim:6,-->
							<!--icon: 5,-->
							<!--time:800-->
							<!--});-->
							<!--return;-->
					<!--}-->
				<!--})-->
			<!--})-->
<!--</script>-->
<!--<script type="text/javascript">-->
        <!--function loginUser() {-->
            <!--$.ajax({-->
                <!--dataType: 'json', // 注意：这里是指希望服务端返回json格式的数据-->
                <!--cache: true,-->
                <!--async: false,-->
                <!--type: 'POST',-->
                <!--data: $('#login-form').serialize(),-->
                <!--url: '/main',-->
                <!--error: function () {-->
                    <!--alert('请求失败');-->
                <!--},-->
                <!--success: function (data) {-->
                    <!--if (data.code==0){-->
                        <!--window.location.href = '/toPageMain';-->
                    <!--}-->

                <!--}-->
            <!--});-->
        <!--}-->
        <!--if(window != top)-->
        <!--top.location.href = location.href;-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title></title>
	<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="/static/css/formValidation.min.css" />
	<link rel="stylesheet" type="text/css" href="/static/css/pattern.css" />
</head>

<body id="body">

<header class="header">
	<div class="full-center">

		<form id="defaultForm" method="post" class="form-horizontal">
			<div class="form-group">
				<input type="text" class="form-control" name="username" placeholder="用户名" />
			</div>
			<div class="form-group">
				<input type="password" class="form-control" name="password" placeholder="密   码" />
			</div>
			<div class="form-group">
				<button type="button" class="btn btn-info" onclick="loginUser()">登    录</button>
			</div>
		</form>

	</div>
</header>

<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/formValidation.min.js"></script>
<script type="text/javascript" src="/static/js/lib/bootstrap/dist/js/bootstrap.js"></script>
<script type="text/javascript" src="/static/js/circleMagic.js"></script>
<script>
    $(function() {
        $('.header').circleMagic({
            radius: 36,
            density: .1,
            color: 'rgba(255, 248, 220, 0.8)',
            clearOffset: .9
        });

        $('#defaultForm').formValidation({
            icon: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                username: {
                    message: '用户名输入错误',
                    validators: {
                        notEmpty: {
                            message: '用户名不能为空'
                        },
                        stringLength: {
                            min: 1,
                            max: 11,
                            message: '用户名必须大于1个字符，长度必须小于11个字符。'
                        },
                        /*remote: {
                            url: 'remote.php',
                            message: 'The username is not available'
                        },*/
                        regexp: {
                            regexp: /^[a-zA-Z0-9_\.]+$/,
                            message: '用户名只能由字母、数字、点和下划线组成'
                        }
                    }
                },
                password: {
                    validators: {
                        notEmpty: {
                            message: '密码不能为空'
                        },
                        regexp: {
                            regexp: /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{3,10}$/,
                            message: '密码至少包含 数字和英文组成的3-10位字符'
                        },
                        different: {
                            field: 'username',
                            message: '密码不能与用户名相同'
                        }
                    }
                }
            }
        }).on('success.form.fv', function(e) {
            //阻止默认的submit方法，用ajax提交
            e.preventDefault();

            //可以使用的一些实例包括   表单实例
            var $form = $(e.target);

            // 获取formValidation实例
            var bv = $form.data('formValidation');
        });
    })
</script>

<script type="text/javascript">
    function loginUser() {
        $.ajax({
            dataType: 'json', // 注意：这里是指希望服务端返回json格式的数据
            cache: true,
            async: false,
            type: 'POST',
            data: $('#defaultForm').serialize(),
            url: '/main',
            error: function () {
                alert('请求失败');
            },
            success: function (data) {
                if (data.code == 0) {
                    window.location.href = '/toPageMain';
                }

            }
        });
    }

    if (window != top)
        top.location.href = location.href;
</script>
</body>

</html>